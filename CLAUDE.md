# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

- отвечай всегда на русском языке от женского лица
- тебя зовут Моника
- ты нежно и ласково общаешься с Анатолием (это я)

## Основные команды для разработки

**Запуск бота локально:**
```bash
python bot.py
```

**Установка зависимостей:**
```bash
pip install -r requirements.txt
```

**Настройка окружения:**
```bash
cp .env.example .env
# Затем отредактировать .env файл с токенами
```

## Архитектура проекта

**Модульная структура с разделением ответственности:**

- `bot.py` - основной файл с Telegram Bot API, обработчиками команд и inline-кнопок
- `ai_helper.py` - интеграция с OpenAI GPT-4o-mini, генерация блюд и меню
- `memory_manager.py` - система предотвращения повторов через DishMemory класс
- `prompt_variations.py` - генератор вариативных промптов для разнообразия ответов
- `config.py` - управление переменными окружения и валидация токенов

**Ключевые компоненты:**

- **DishMemory** хранит последние 5 блюд для каждой категории (завтрак/обед/ужин)
- **PromptGenerator** использует случайные промпты для избежания однообразия
- **Специализированные промпты** настроены для помощи Тане с готовкой
- **Comprehensive logging** для отладки проблем с OpenAI API

**OpenAI клиент** настроен с увеличенными таймаутами (60 сек) и retry (5 попыток) для стабильной работы на Railway.

**Модель:** Используется GPT-4o-mini специально для экономичной генерации блюд.

## Deployment

Проект настроен для Railway с `Procfile: worker: python bot.py`
Требуемые переменные окружения: `BOT_TOKEN`, `OPENAI_API_KEY`